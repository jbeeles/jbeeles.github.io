<!DOCTYPE html>
<html>
<head>  
        <meta charset="UTF-8">
    <title>Jessica Beeles Project 5</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.1.2/handlebars.min.js"></script>
</head>
<body style='margin-left: 30px;'>

    <h1>Select A Major</h1>
   
        
    <input type="button" id='btn' value="CIT Majors">
    <input type="button" id='btn' value="Business Majors">
             
 	<div id="result"></div>
    <h2>We filter our dataset by major</h2>
	<script type="text/x-handlebars-template" id="tableTemplate">

<table class="table table-striped">
<tr><th>Name</th><th>Major</th><th>Midterm</th><th>Final</th></tr>
{{#each rows}}
<tr>
<td>{{name}}</td><td>{{major}}</td><td>{{midterm}}</td><td>{{final}}</td>
</tr>
{{/each}}
</table>
</script>

 
<script>
   
    document.addEventListener('DOMContentLoaded', function() {     
													  
    	document.querySelector('#btn').onclick = function(){  
        	var request = new XMLHttpRequest();
        	request.open('GET', 'cit5students.json');

        	request.onload = function(){

            	var data = JSON.parse(request.responseText);
			 major_items = data.filter(getMajor)       
         	function getMajor(item) {
                         return item.major == selected_major;   
         }
			
            	if (request.status == 200) {
            		var contents = "<table cellspacing='5'><tr><td>Name</td><td></td>Major<td>Midterm</td><td>Final</td></tr>"
					
            		for(i = 0; i < data.length; i++) {
                     	contents += "<tr><td>" + data[i].name +"<tr><td>" + data[i].major + "</td><td>" + data[i].midterm + "</td><td>" + data[i].final + "</td></tr>";
                	}
					
                	contents += "</table>";
                	document.querySelector('#result').innerHTML = contents;
            	}
            	else {
                	document.querySelector('#result').innerHTML = "Danger will Robinson, there was an error.";
            	}
        }

        request.send(null);
    };
	
  });
   
</script>
   
   
</body>
</html>
